<!--
author: W3layouts
author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html lang="zxx">

<head>
	<title>Downy Shoes an Ecommerce Category Bootstrap Responsive Website Template | Check Out :: w3layouts</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content="Downy Shoes Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
	<script type="application/x-javascript">
		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	</script>


	<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
	<!-- //custom-theme -->
	<link href="/static/css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
	<link rel="stylesheet" href="/static/css/shop.css" type="text/css" media="screen" property="" />
	<link href="/static/css/style7.css" rel="stylesheet" type="text/css" media="all" />
	<!-- Owl-carousel-CSS -->
	<link rel="stylesheet" type="text/css" href="/static/css/checkout.css">
	<link href="/static/css/style.css" rel="stylesheet" type="text/css" media="all" />
	<!-- font-awesome-icons -->
	<link href="/static/css/font-awesome.css" rel="stylesheet">
	<!-- //font-awesome-icons -->
	<link href="//fonts.googleapis.com/css?family=Montserrat:100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800"
	    rel="stylesheet">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800" rel="stylesheet">
</head>

<body>
	<!-- banner -->
	<div class="banner_top innerpage" id="home">
		<div class="wrapper_top_w3layouts">
			<div class="header_agileits">
				<div class="logo inner_page_log">
					<h1><a class="navbar-brand" href="index.html"><span>Downy</span> <i>Shoes</i></a></h1>
				</div>
				<div class="overlay overlay-contentpush">
					<button type="button" class="overlay-close"><i class="fa fa-times" aria-hidden="true"></i></button>

					<nav>
						<ul>
							<li><a href="/" class="active">Home</a></li>
							
							<li><a href="/shop/">Shop Now</a></li>
							
							{% if request.session.uid%}
							<li><a href="/logout/">Logout</a></li>
							{% else %}
							<li><a href="/login/">User Login</a></li>
							<li><a href="/register/">User Register</a></li>
							<li><a href="/vendor/venregister/">Vendor Register</a></li>
							<li><a href="/vendor/venlogin/">Vendor Login</a></li>
							{% endif %}
							

						</ul>
					</nav>
				</div>
				<div class="mobile-nav-button">
					<button id="trigger-overlay" type="button"><i class="fa fa-bars" aria-hidden="true"></i></button>
				</div>
				<!-- cart details -->
				<div class="top_nav_right">
					<div class="shoecart shoecart2 cart cart box_1">
						<form action="#" method="post" class="last">
							<input type="hidden" name="cmd" value="_cart">
							<input type="hidden" name="display" value="1">
							<button class="top_shoe_cart" type="submit" name="submit" value=""><i class="fa fa-cart-arrow-down" aria-hidden="true"></i></button>
						</form>
					</div>
				</div>
			</div>
		</div>
		<!-- //cart details -->
		<!-- search -->
		<div class="search_w3ls_agileinfo">
			<div class="cd-main-header">
				<ul class="cd-header-buttons">
					<li><a class="cd-search-trigger" href="#cd-search"> <span></span></a></li>
				</ul>
			</div>
			<div id="cd-search" class="cd-search">
				<form action="#" method="post">
					<input name="Search" type="search" placeholder="Click enter after typing...">
				</form>
			</div>
		</div>
		<!-- //search -->
		<div class="clearfix"></div>
		<!-- /banner_inner -->
		<div class="services-breadcrumb_w3ls_agileinfo">
			<div class="inner_breadcrumb_agileits_w3">

				<ul class="short">
					<li><a href="index.html">Home</a><i>|</i></li>
					<li>Check Out</li>
				</ul>
			</div>
		</div>
		<!-- //banner_inner -->
	</div>

	<!-- //banner -->
	<!-- top Products -->
	<div class="ads-grid_shop">
		<div class="shop_inner_inf">
			<div class="privacy about">
				<h3>Chec<span>kout</span></h3>

				<div class="checkout-right">
					<h4>Your shopping cart contains: <span>3 Products</span></h4>
					<table class="timetable_sub">
						<thead>
							<tr>
								<th>SL No.</th>
								<th>Product</th>
								<th>Quality</th>
								<th>Product Name</th>

								<th>Price</th>
								<th>Remove</th>

							</tr>
						</thead>
						{% for x in data %}
						<tbody>
							<tr class="rem1">
								<td class="invert">{{forloop.counter}}</td>
								<td class="invert-image"><a href="single.html"><img src="{{x.pid.image.url}}" style="width: 75px; height: 75px;"  alt=" " class="img-responsive"></a></td>
								<!-- <td class="invert">
									<div class="quantity">
										<div class="quantity-select">
											<div class="entry value-minus">&nbsp;</div>
											<div class="entry value"><span>1</span></div>
											<div class="entry value-plus active">&nbsp;</div>
										</div>
									</div>
								</td> -->

								<td><form action="/cart_update/?cid={{x.id}}" method="POST">
									{% csrf_token %} <select class="select" name="qty" onchange="this.form.submit()">
										  <option selected value="{{x.quantity}}">{{x.quantity}}</option>
										  <option>1</option>
										  <option>2</option>
										  <option>3</option>
										  <option>4</option>
										  <option>5</option>
						
						
										</select>
						</form>
								<td class="invert">{{x.pid.name}}</td>

								<td class="invert">${{x.total}}</td>
								
									<td class="invert"><a href="/cart_delete/?cid={{x.id}}"><i class="fa fa-trash">Remove</i></a></td>
									<td><button class="buy-button" data-product-id="{{ x.id }}" data-total="{{ x.total }}">Checkout</button></td>


								
							</tr>
							{% endfor %}
							

						</tbody>
					</table>
				</div>
				<div class="checkout-left">
					<div class="col-md-4 checkout-left-basket">
						<h4>Continue to basket</h4>
						<ul>
							
							<li>Total With Delivery Charge and GST <i>-</i> <span style="font-size: 20px;color: brown;">${{total}}</span></li>
						</ul>
					</div>
					
					
							
						</form>
						 
						<div class="checkout-right-basket">
							<!-- <button id="rzp-button" >Pay Now</button> -->
							<!-- <a href="/payment/">Make a Payment </a> -->
						</div>
						
					</div>

					<div class="clearfix"> </div>


					<div class="clearfix"></div>
				</div>
			</div>
		</div>
		



		<script>
			// Assuming you have multiple buttons with the class 'buy-button'
			var buyButtons = document.querySelectorAll('.buy-button');
			
			buyButtons.forEach(function(button) {
				button.addEventListener('click', function() {
					const productId = button.getAttribute('data-product-id');
					const totalAmount = parseFloat(button.getAttribute('data-total'));
					
					const data = {
						product_id: productId,
						total: totalAmount*100
					};
		
					// Make an API request to your Django backend to initiate the split payment
					fetch('/payment/', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json',
							'X-CSRFToken': getCookie('csrftoken') // Include CSRF token
						},
						body: JSON.stringify(data) // Include the data in the request body
					})
					.then(response => response.json())
					.then(data => {
						// Initialize the Razorpay Checkout form
						var options = {
							key: 'rzp_test_9wyCq1vo5Rar4X',
							amount: data.order_amount,
							currency: 'INR',
							name: 'DOWNY SHOES',
							description: 'Order Payment',
							order_id: data.order_id,
							handler: function(response) {
								// Handle the response after payment success
								console.log(response);
							}
						};
						var rzp = new Razorpay(options);
						rzp.open();
					});
				});
			});
		
			// Function to get CSRF token from cookies
			function getCookie(name) {
				var value = "; " + document.cookie;
				var parts = value.split("; " + name + "=");
				if (parts.length == 2) return parts.pop().split(";").shift();
			}
		</script>
		
		
	<!-- //cart-js -->
	<!-- /nav -->
	<script src="/static/js/modernizr-2.6.2.min.js"></script>
	<script src="/static/js/classie.js"></script>
	<script src="/static/js/demo1.js"></script>
	<!-- //nav -->
	<!--search-bar-->
	<script src="/static/js/search.js"></script>
	<!--//search-bar-->
	<!--quantity-->
	<script>
		$('.value-plus').on('click', function () {
			var divUpd = $(this).parent().find('.value'),
				newVal = parseInt(divUpd.text(), 10) + 1;
			divUpd.text(newVal);
		});

		$('.value-minus').on('click', function () {
			var divUpd = $(this).parent().find('.value'),
				newVal = parseInt(divUpd.text(), 10) - 1;
			if (newVal >= 1) divUpd.text(newVal);
		});
	</script>
	<!--quantity-->
	<script>
		$(document).ready(function (c) {
			$('.close1').on('click', function (c) {
				$('.rem1').fadeOut('slow', function (c) {
					$('.rem1').remove();
				});
			});
		});
	</script>
	<script>
		$(document).ready(function (c) {
			$('.close2').on('click', function (c) {
				$('.rem2').fadeOut('slow', function (c) {
					$('.rem2').remove();
				});
			});
		});
	</script>
	<script>
		$(document).ready(function (c) {
			$('.close3').on('click', function (c) {
				$('.rem3').fadeOut('slow', function (c) {
					$('.rem3').remove();
				});
			});
		});
	</script>

	<!-- start-smoth-scrolling -->
	<script type="text/javascript" src="/static/js/move-top.js"></script>
	<script type="text/javascript" src="/static/js/easing.js"></script>
	<script type="text/javascript">
		jQuery(document).ready(function ($) {
			$(".scroll").click(function (event) {
				event.preventDefault();
				$('html,body').animate({
					scrollTop: $(this.hash).offset().top
				}, 1000);
			});
		});
	</script>
	<!-- //end-smoth-scrolling -->
	<script type="text/javascript" src="/static/js/bootstrap-3.1.1.min.js"></script>


</body>

</html>